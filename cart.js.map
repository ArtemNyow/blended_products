{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport { updateNavCartCount, updateNavWishlistCount } from \"./js/helpers\";\nimport { getProductsById } from \"./js/products-api\";\nimport { refs } from \"./js/refs\";\nimport { hideNoProductsMessage, renderProductToCategory, showNoProductsMessage } from \"./js/render-function\";\nimport { getCart } from \"./js/storage\";\n\n//Логіка сторінки Cart\nasync function initCartPage() {\n    updateNavCartCount();\n    updateNavWishlistCount();\n    refs.loader.classList.add('active');\n    const cartIds = getCart();\n    if (cartIds.length === 0) {\n        refs.productList.innerHTML = \"\";\n        showNoProductsMessage();\n        updateCartSummary([], 0);\n        refs.loader.classList.remove('active'); \n        return;\n    }\n    try {\n        const products = await Promise.all(cartIds.map(id => getProductsById(id)));\n        renderProductToCategory(products);\n        updateCartSummary(products);\n        hideNoProductsMessage();\n    } catch (error) {\n        iziToast.error({ message: \"Failed to load cart products\", position: \"topRight\" });\n    } finally {\n        refs.loader.classList.remove('active'); \n    }\n}\n\nfunction updateCartSummary(products) {\n    const countEl = refs.cartSummaryCount;\n    const priceEl = refs.cartSummaryPrice;\n\n    const totalCount = products.length;\n    const totalPrice = products.reduce((sum, product) => sum + (product.price || 0), 0);\n\n    countEl.textContent = totalCount;\n    priceEl.textContent = `$${totalPrice.toFixed(2)}`;\n}\n\n\nrefs.buyProductsBtn.addEventListener(\"click\", () => {\n    iziToast.success({\n        title: \"Success\",\n        message: \"Products purchased successfully!\",\n        position: \"topRight\",\n    })\n    localStorage.removeItem(\"cart\");\n    updateNavCartCount();\n\n    refs.productList.innerHTML = \"\";\n    updateCartSummary([], 0);\n    showNoProductsMessage();\n});\n\ninitCartPage();"],"names":["initCartPage","updateNavCartCount","updateNavWishlistCount","refs","cartIds","getCart","showNoProductsMessage","updateCartSummary","products","id","getProductsById","renderProductToCategory","hideNoProductsMessage","iziToast","countEl","priceEl","totalCount","totalPrice","sum","product"],"mappings":"2IAQA,eAAeA,GAAe,CAC1BC,IACAC,IACAC,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClC,MAAMC,EAAUC,IAChB,GAAID,EAAQ,SAAW,EAAG,CACtBD,EAAK,YAAY,UAAY,GAC7BG,IACAC,EAAkB,CAAK,CAAA,EACvBJ,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrC,MACH,CACD,GAAI,CACA,MAAMK,EAAW,MAAM,QAAQ,IAAIJ,EAAQ,IAAIK,GAAMC,EAAgBD,CAAE,CAAC,CAAC,EACzEE,EAAwBH,CAAQ,EAChCD,EAAkBC,CAAQ,EAC1BI,GACH,MAAe,CACZC,EAAS,MAAM,CAAE,QAAS,+BAAgC,SAAU,UAAU,CAAE,CACxF,QAAc,CACNV,EAAK,OAAO,UAAU,OAAO,QAAQ,CACxC,CACL,CAEA,SAASI,EAAkBC,EAAU,CACjC,MAAMM,EAAUX,EAAK,iBACfY,EAAUZ,EAAK,iBAEfa,EAAaR,EAAS,OACtBS,EAAaT,EAAS,OAAO,CAACU,EAAKC,IAAYD,GAAOC,EAAQ,OAAS,GAAI,CAAC,EAElFL,EAAQ,YAAcE,EACtBD,EAAQ,YAAc,IAAIE,EAAW,QAAQ,CAAC,CAAC,EACnD,CAGAd,EAAK,eAAe,iBAAiB,QAAS,IAAM,CAChDU,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,mCACT,SAAU,UAClB,CAAK,EACD,aAAa,WAAW,MAAM,EAC9BZ,IAEAE,EAAK,YAAY,UAAY,GAC7BI,EAAkB,CAAK,CAAA,EACvBD,GACJ,CAAC,EAEDN,EAAc"}