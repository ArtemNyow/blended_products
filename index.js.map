{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/helpers.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    categoryList: document.querySelector(\".categories\"),\n    productList: document.querySelector(\".products\"),\n    notFound: document.querySelector(\".not-found\"),\n    modal: document.querySelector(\".modal\"),\n    modalProduct: document.querySelector(\".modal-product\"),\n    modalCloseBtn: document.querySelector(\".modal__close-btn\"),\n    searchForm:document.querySelector(\".search-form\"),\n    searchBtnClear:document.querySelector(\".search-form__btn-clear\"),\n    searchInput:document.querySelector(\".search-form__input\"),\n};\n","// Функції для роботи з бекендом\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\n\naxios.defaults.baseURL = 'https://dummyjson.com';\n\nexport async function getCategories() {\n    try {\n        const { data } = await axios('/products/categories');\n        return data; \n    } catch (error) {\n        iziToast.error({ message: error.message,position:\"topRight\"})\n    } \n} \n\nexport async function getProducts(currentPage) {\n    const url = `/products?limit=12&skip=${(currentPage - 1) * 12}`;\n    try {\n        const { data } = await axios(url);\n        return data;  \n    } catch (error) {\n        iziToast.error({ message: error.message,position:\"topRight\"})\n    }\n    \n}\n\nexport async function getProductsToCategory(currentCategorie) {\n    const url = `products/category/${currentCategorie}`;\n    try {\n        const { data } = await axios(url);        \n        return data;  \n        \n    } catch (error) {\n        iziToast.error({ message: error.message,position:\"topRight\"})\n    }\n    \n}\n\n\nexport async function getProductsById(id) {\n    const url = `products/${id}`;\n    try {\n        const { data } = await axios(url);        \n        return data;  \n        \n    } catch (error) {\n        iziToast.error({ message: error.message,position:\"topRight\"})\n    }\n    \n}\n\nexport async function getProductsByValue(value, currentPage = 1, limit = 12) {\n    const skip = (currentPage - 1) * 12;\n    const url = `products/search?q=${encodeURIComponent(value)}&limit=${limit}&skip=${skip}`;    try {\n        const { data } = await axios(url);        \n        return data;  \n        \n    } catch (error) {\n        iziToast.error({ message: error.message,position:\"topRight\"})\n    }\n    \n}","//Функцію для створення, рендеру або видалення розмітки\n\nimport { getCategories, getProducts } from \"./products-api\";\nimport { refs } from \"./refs\";\n\n\n\nexport const markupCategories = categoris => {\n    return categoris.map(\n        ({ name }) => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${name}</button>\n </li>\n`).join('');  \n};\n\nexport const renderCategories = async () => {\n    const categoriesArr = await getCategories();\n    categoriesArr.unshift({ name: 'All' });\n    refs.categoryList.insertAdjacentHTML('beforeend', markupCategories(categoriesArr))\n    \n    \n}\n\nexport const markupProducts = products => {\n    return products.map(\n        ({ id, thumbnail, title, brand, category, price }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category} </p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>\n\n`).join('');  \n};\n\nexport const renderProducts = async currentPage => {\n    const { products } = await getProducts(currentPage);\n    if (products.length > 0) {\n        refs.productList.insertAdjacentHTML('beforeend', markupProducts(products))\n    } \n}\nexport function renderProductToCategory(products) {\n    refs.productList.innerHTML = markupProducts(products);\n  }\n\nexport function showNoProductsMessage() {\n    refs.notFound.classList.add(\"not-found--visible\");\n  }\n  \n  export function hideNoProductsMessage() {\n    refs.notFound.classList.remove(\"not-found--visible\");\n}\n  \n\n\n\nexport function markupProductsModal ({\n  thumbnail, title, price, tags =[], description, returnPolicy, shippingInformation\n})  {\n\n  const tagItems = tags.map(tag => `<li>${tag}</li>`).join('');  return `<img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tagItems}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`\n};\n\n\nexport function renderProductsModal(product) {\n      refs.modalProduct.innerHTML = \"\";\n      refs.modalProduct.insertAdjacentHTML('beforeend', markupProductsModal(product))\n}","//Допоміжні функції\n\nexport function setActiveCategoryButton(clickedButton, buttonsContainer) {\n    const allButtons = buttonsContainer.querySelectorAll('.categories__btn');\n    allButtons.forEach(btn => btn.classList.remove('categories__btn--active'));\n    clickedButton.classList.add('categories__btn--active');\n  }\n  ","import { refs } from \"./refs\";\n\n//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nexport function openModal() {\n    refs.modal.classList.add('modal--is--open');\n}\nexport function closeModal() {\n    refs.modal.classList.remove('modal--is--open');\n}","// Функції, які передаються колбеками в addEventListners\n\nimport iziToast from \"izitoast\";\nimport { refs } from \"./refs\";\nimport { getProducts, getProductsById, getProductsByValue, getProductsToCategory } from \"./products-api\";\nimport { hideNoProductsMessage, markupProducts, markupProductsModal, renderProductsModal, renderProductToCategory, showNoProductsMessage } from \"./render-function\";\nimport { setActiveCategoryButton } from \"./helpers\";\nimport { openModal } from \"./modal\";\n\n\nexport async function handleCategoryClick(event) {\n    const button = event.target.closest('.categories__btn');\n    if (!button) return;\n  \n    setActiveCategoryButton(button, refs.categoryList);\n    \n    const categoryName = button.textContent.trim();\n    refs.productList.innerHTML = '';\n    hideNoProductsMessage();\n    try {\n      let data;\n        if (categoryName.toLowerCase() === 'all') {\n          data = await getProducts(1); \n        } else {\n          data = await getProductsToCategory(categoryName);\n        }\n      if (data && Array.isArray(data.products) && data.products.length>0) {\n          renderProductToCategory(data.products)\n        } else {\n        showNoProductsMessage();\n      }\n    } catch (error) {\n        iziToast.error({ message: error.message, position: \"topRight\" });\n    }\n  }\n  \nexport async function handleProductClick(event){\n  const productId = event.target.closest('.products__item');\n  if (!productId) return;\n  const id = productId.getAttribute(\"data-id\");\n\n  try {\n    const product = await getProductsById(id)\n    renderProductsModal(product);\n    openModal();\n    return;\n    \n } catch (error) {\n  iziToast.error({ message: error.message, position: \"topRight\" });\n }\n}\n\nexport async function searchSubmit(event) {\n  event.preventDefault();\n\n  const query = refs.searchInput.value.trim();\n  if (!query) return;\n\n  refs.productList.innerHTML = '';\n  hideNoProductsMessage()\n\n  try {\n    const data = await getProductsByValue(query);\n    if (data.products.length > 0) {\n      renderProductToCategory(data.products);\n    } else {\n      showNoProductsMessage()\n    }\n  } catch (error) {\n    iziToast.error({ message: error.message, position: \"topRight\" })\n  }\n}\nexport async function clearSearch() {\n\n  refs.searchInput.value=\"\"\n  refs.productList.innerHTML = \"\"\n  hideNoProductsMessage();\n  try {\n    const data = await getProducts(1);\n    if (data && Array.isArray(data.products) && data.products.length > 0) {\n      renderProductToCategory(data.products);\n    } else {\n      showNoProductsMessage()\n    }\n  } catch (error) {\n    iziToast.error({ message: error.message, position: \"topRight\" });\n  }\n}\n\n","import { clearSearch, handleCategoryClick ,handleProductClick, searchSubmit } from \"./js/handlers\";\nimport { closeModal } from \"./js/modal\";\nimport { refs } from \"./js/refs\";\nimport { renderCategories, renderProducts } from \"./js/render-function\";\n\n//Логіка сторінки Home\n\nrenderCategories()\n\nconst currentPage = 1;\nrenderProducts(currentPage)\n\nrefs.categoryList.addEventListener('click', handleCategoryClick)\nrefs.productList.addEventListener('click',handleProductClick)\nrefs.modalCloseBtn.addEventListener('click', closeModal)\n\nrefs.searchForm.addEventListener('submit', searchSubmit)\nrefs.searchBtnClear.addEventListener('click', clearSearch)\n"],"names":["refs","axios","getCategories","data","error","iziToast","getProducts","currentPage","url","getProductsToCategory","currentCategorie","getProductsById","id","getProductsByValue","value","limit","skip","markupCategories","categoris","name","renderCategories","categoriesArr","markupProducts","products","thumbnail","title","brand","category","price","renderProducts","renderProductToCategory","showNoProductsMessage","hideNoProductsMessage","markupProductsModal","tags","description","returnPolicy","shippingInformation","tagItems","tag","renderProductsModal","product","setActiveCategoryButton","clickedButton","buttonsContainer","btn","openModal","closeModal","handleCategoryClick","event","button","categoryName","handleProductClick","productId","searchSubmit","query","clearSearch"],"mappings":"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"}