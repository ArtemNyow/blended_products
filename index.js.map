{"version":3,"file":"index.js","sources":["../src/js/handlers.js","../src/home.js"],"sourcesContent":["// Функції, які передаються колбеками в addEventListners\n\nimport iziToast from \"izitoast\";\nimport { refs } from \"./refs\";\nimport { getProducts, getProductsById, getProductsByValue, getProductsToCategory } from \"./products-api\";\nimport { hideNoProductsMessage, renderProductsModal, renderProductToCategory, showNoProductsMessage } from \"./render-function\";\nimport { setActiveCategoryButton } from \"./helpers\";\nimport { initModalCartButton, initModalWishlistButton, openModal } from \"./modal\";\n\n\nexport async function handleCategoryClick(event) {\n    const button = event.target.closest('.categories__btn');\n    if (!button) return;\n  \n    setActiveCategoryButton(button, refs.categoryList);\n    \n    const categoryName = button.textContent.trim();\n    refs.productList.innerHTML = '';\n  hideNoProductsMessage();\n  refs.loader.classList.add('active'); \n    try {\n      let data;\n        if (categoryName.toLowerCase() === 'all') {\n          data = await getProducts(1); \n        } else {\n          data = await getProductsToCategory(categoryName);\n        }\n      if (data && Array.isArray(data.products) && data.products.length>0) {\n          renderProductToCategory(data.products)\n        } else {\n        showNoProductsMessage();\n      }\n    } catch (error) {\n        iziToast.error({ message: error.message, position: \"topRight\" });\n    }finally {\n      refs.loader.classList.remove('active');  \n    }\n  }\n  \nexport async function handleProductClick(event){\n  const productId = event.target.closest('.products__item');\n  if (!productId) return;\n  const id = productId.getAttribute(\"data-id\");\n  refs.loader.classList.add('active'); \n  try {\n    const product = await getProductsById(id)\n    renderProductsModal(product);\n    openModal();\n    initModalCartButton(id);\n    initModalWishlistButton(id);\n    return;\n    \n } catch (error) {\n  iziToast.error({ message: error.message, position: \"topRight\" });\n }finally {\n  refs.loader.classList.remove('active');  \n}\n}\n\nexport async function searchSubmit(event) {\n  event.preventDefault();\n\n  const query = refs.searchInput.value.trim();\n  if (!query) return;\n\n  refs.productList.innerHTML = '';\n  hideNoProductsMessage()\n\n  \n  refs.loader.classList.add('active');  \n  try {\n    const data = await getProductsByValue(query);\n    if (data.products.length > 0) {\n      renderProductToCategory(data.products);\n    } else {\n      showNoProductsMessage()\n    }\n  } catch (error) {\n    iziToast.error({ message: error.message, position: \"topRight\" })\n  }finally {\n    refs.loader.classList.remove('active');  \n  }\n}\nexport async function clearSearch() {\n\n  refs.searchInput.value=\"\"\n  refs.productList.innerHTML = \"\"\n  hideNoProductsMessage();\n\n  refs.loader.classList.add('active');  \n  try {\n    const data = await getProducts(1);\n    if (data && Array.isArray(data.products) && data.products.length > 0) {\n      renderProductToCategory(data.products);\n    } else {\n      showNoProductsMessage()\n    }\n  } catch (error) {\n    iziToast.error({ message: error.message, position: \"topRight\" });\n  }finally {\n    refs.loader.classList.remove('active');  \n  }\n}\n\n","import iziToast from \"izitoast\";\nimport { clearSearch, handleCategoryClick ,handleProductClick, searchSubmit } from \"./js/handlers\";\nimport { initScrollUp, updateNavCartCount, updateNavWishlistCount } from \"./js/helpers\";\nimport { closeModal } from \"./js/modal\";\nimport { refs } from \"./js/refs\";\nimport { renderCategories, renderProducts } from \"./js/render-function\";\n\nasync function initHomePage() {\n  try {\n    refs.loader.classList.add('active');\n\n    await renderCategories();\n\n    const currentPage = 1;\n    await renderProducts(currentPage);\n\n    updateNavCartCount();\n    updateNavWishlistCount();\n    initScrollUp()\n    refs.categoryList.addEventListener('click', handleCategoryClick);\n    refs.productList.addEventListener('click', handleProductClick);\n    refs.modalCloseBtn.addEventListener('click', closeModal);\n    refs.searchForm.addEventListener('submit', searchSubmit);\n    refs.searchBtnClear.addEventListener('click', clearSearch);\n\n  } catch (error) {\n    iziToast.error({\n        message: error.message, \n        position: \"topRight\"\n      });\n  } finally {\n    refs.loader.classList.remove('active');\n  }\n}\n\nwindow.addEventListener('DOMContentLoaded', initHomePage);\n"],"names":["handleCategoryClick","event","button","setActiveCategoryButton","refs","categoryName","hideNoProductsMessage","data","getProducts","getProductsToCategory","renderProductToCategory","showNoProductsMessage","error","iziToast","handleProductClick","productId","id","product","getProductsById","renderProductsModal","openModal","initModalCartButton","initModalWishlistButton","searchSubmit","query","getProductsByValue","clearSearch","initHomePage","renderCategories","renderProducts","updateNavCartCount","updateNavWishlistCount","initScrollUp","closeModal"],"mappings":"0QAUO,eAAeA,EAAoBC,EAAO,CAC7C,MAAMC,EAASD,EAAM,OAAO,QAAQ,kBAAkB,EACtD,GAAI,CAACC,EAAQ,OAEbC,EAAwBD,EAAQE,EAAK,YAAY,EAEjD,MAAMC,EAAeH,EAAO,YAAY,KAAI,EAC5CE,EAAK,YAAY,UAAY,GAC/BE,IACAF,EAAK,OAAO,UAAU,IAAI,QAAQ,EAChC,GAAI,CACF,IAAIG,EACEF,EAAa,YAAa,IAAK,MACjCE,EAAO,MAAMC,EAAY,CAAC,EAE1BD,EAAO,MAAME,EAAsBJ,CAAY,EAE/CE,GAAQ,MAAM,QAAQA,EAAK,QAAQ,GAAKA,EAAK,SAAS,OAAO,EAC7DG,EAAwBH,EAAK,QAAQ,EAEvCI,GAEH,OAAQC,EAAO,CACZC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CACvE,QAAK,CACCR,EAAK,OAAO,UAAU,OAAO,QAAQ,CACtC,CACF,CAEI,eAAeU,EAAmBb,EAAM,CAC7C,MAAMc,EAAYd,EAAM,OAAO,QAAQ,iBAAiB,EACxD,GAAI,CAACc,EAAW,OAChB,MAAMC,EAAKD,EAAU,aAAa,SAAS,EAC3CX,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClC,GAAI,CACF,MAAMa,EAAU,MAAMC,EAAgBF,CAAE,EACxCG,EAAoBF,CAAO,EAC3BG,IACAC,EAAoBL,CAAE,EACtBM,EAAwBN,CAAE,EAC1B,MAEF,OAAQJ,EAAO,CACfC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CACjE,QAAE,CACAR,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACA,CAEO,eAAemB,EAAatB,EAAO,CACxCA,EAAM,eAAc,EAEpB,MAAMuB,EAAQpB,EAAK,YAAY,MAAM,KAAI,EACzC,GAAKoB,EAEL,CAAApB,EAAK,YAAY,UAAY,GAC7BE,EAAuB,EAGvBF,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClC,GAAI,CACF,MAAMG,EAAO,MAAMkB,EAAmBD,CAAK,EACvCjB,EAAK,SAAS,OAAS,EACzBG,EAAwBH,EAAK,QAAQ,EAErCI,EAAuB,CAE1B,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,WAAY,CACnE,QAAG,CACCR,EAAK,OAAO,UAAU,OAAO,QAAQ,CACtC,EACH,CACO,eAAesB,GAAc,CAElCtB,EAAK,YAAY,MAAM,GACvBA,EAAK,YAAY,UAAY,GAC7BE,IAEAF,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClC,GAAI,CACF,MAAMG,EAAO,MAAMC,EAAY,CAAC,EAC5BD,GAAQ,MAAM,QAAQA,EAAK,QAAQ,GAAKA,EAAK,SAAS,OAAS,EACjEG,EAAwBH,EAAK,QAAQ,EAErCI,EAAuB,CAE1B,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CACnE,QAAG,CACCR,EAAK,OAAO,UAAU,OAAO,QAAQ,CACtC,CACH,CC/FA,eAAeuB,GAAe,CAC5B,GAAI,CACFvB,EAAK,OAAO,UAAU,IAAI,QAAQ,EAElC,MAAMwB,EAAgB,EAGtB,MAAMC,EADc,CACY,EAEhCC,IACAC,IACAC,EAAc,EACd5B,EAAK,aAAa,iBAAiB,QAASJ,CAAmB,EAC/DI,EAAK,YAAY,iBAAiB,QAASU,CAAkB,EAC7DV,EAAK,cAAc,iBAAiB,QAAS6B,CAAU,EACvD7B,EAAK,WAAW,iBAAiB,SAAUmB,CAAY,EACvDnB,EAAK,eAAe,iBAAiB,QAASsB,CAAW,CAE1D,OAAQd,EAAO,CACdC,EAAS,MAAM,CACX,QAASD,EAAM,QACf,SAAU,UAClB,CAAO,CACP,QAAY,CACRR,EAAK,OAAO,UAAU,OAAO,QAAQ,CACtC,CACH,CAEA,OAAO,iBAAiB,mBAAoBuB,CAAY"}